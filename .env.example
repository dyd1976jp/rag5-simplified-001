# Ollama Configuration
OLLAMA_HOST=http://localhost:11434
LLM_MODEL=gpt-oss:20b-cloud
EMBED_MODEL=bge-m3
LLM_TIMEOUT=60
OLLAMA_TIMEOUT=180
OLLAMA_BATCH_SIZE=10

# Qdrant Configuration
QDRANT_URL=http://localhost:6333
COLLECTION_NAME=knowledge_base
VECTOR_DIM=1024

# Retrieval Parameters
TOP_K=5
SIMILARITY_THRESHOLD=0.3
ENABLE_HYBRID_SEARCH=false
VECTOR_SEARCH_WEIGHT=0.7
KEYWORD_SEARCH_WEIGHT=0.3
MIN_SIMILARITY_THRESHOLD=0.1
TARGET_RESULTS=3

# Chunking Parameters
CHUNK_SIZE=500
CHUNK_OVERLAP=50
RESPECT_SENTENCE_BOUNDARY=true
ENABLE_CHINESE_SPLITTER=true

# Request Limits
MAX_QUERY_LENGTH=2000
BATCH_SIZE=6

# Logging Configuration
LOG_LEVEL=INFO
LOG_FILE=logs/rag_app.log
ENABLE_QUERY_LOGGING=true
ENABLE_INGESTION_LOGGING=true
ENABLE_CONSOLE_LOGGING=true

# Enhanced Logging Configuration
ENABLE_LLM_LOGGING=true
ENABLE_REFLECTION_LOGGING=true
ENABLE_CONTEXT_LOGGING=true
LLM_LOG_FILE=logs/llm_interactions.log
REFLECTION_LOG_FILE=logs/agent_reflections.log
CONTEXT_LOG_FILE=logs/conversation_context.log
LOG_PROMPTS=true
LOG_RESPONSES=true
REDACT_PROMPTS=false
REDACT_RESPONSES=false
MAX_LOG_ENTRY_SIZE=102400
ASYNC_LOGGING=true
LOG_BUFFER_SIZE=100

# Log Rotation Configuration
ENABLE_LOG_ROTATION=true
LOG_ROTATION_TYPE=size
LOG_MAX_BYTES=10485760
LOG_ROTATION_WHEN=midnight
LOG_BACKUP_COUNT=5
LOG_COMPRESS_ROTATED=true

# Unified Flow Logging Configuration
# Enable unified flow logging to record complete query processing flow in a single file
ENABLE_FLOW_LOGGING=true

# Path to unified flow log file
FLOW_LOG_FILE=logs/unified_flow.log

# Detail level for flow logs: minimal (single-line), normal (multi-line with separators), verbose (full content)
FLOW_DETAIL_LEVEL=normal

# Maximum content length before truncation in flow logs (characters)
FLOW_MAX_CONTENT_LENGTH=500

# Enable async writing for flow logs to minimize performance impact
FLOW_ASYNC_LOGGING=true

# Keep separate log files (llm_interactions.log, agent_reflections.log, conversation_context.log) for backward compatibility
KEEP_SEPARATE_LOGS=true

# Flow Log Rotation Configuration
# Enable log rotation for unified flow logs
FLOW_ROTATION_ENABLED=true

# Rotation type: "size" (rotate when file reaches max size) or "time" (rotate at specific intervals)
FLOW_ROTATION_TYPE=size

# Maximum file size for size-based rotation (bytes, default: 10MB)
FLOW_MAX_BYTES=10485760

# Time interval for time-based rotation: "midnight", "H" (hourly), "D" (daily), "W0"-"W6" (weekly on specific day)
FLOW_ROTATION_WHEN=midnight

# Number of backup files to keep
FLOW_BACKUP_COUNT=5

# Automatically compress rotated log files
FLOW_COMPRESS_ROTATED=true
